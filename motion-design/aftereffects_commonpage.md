# After Effects

## Render

Стандартного рендера в After Effects не всегда хватает, очень часто нужно прибавить скорости. Что есть по скриптам для его ускорения:

* [BG Renderer MAX](https://aescripts.com/bg-renderer/)

Постоянно пользовался старой версией BG Renderer. В среднем ощутимый прирост в зависимости от проекте 20%. Новая MAX версия разочаровала, все время с ней что-то не то, то не рендерит, то проблемы с UI, то скорость не сильно впечатляет.

* [Render Garden](https://www.toolfarm.com/buy/rendergarden/)

Открыл для себя новый рендер, его особенность в том, что он разбивает дорожку рендера на указанное количество частей, параллельно их рендеря. И внезапно это оказывается очень круто. В АЕ есть какая-то проблема с продолжительностью рендера, начало рендерится быстро, а к концу бывает как-то затухает. И вот это сильно решает проблему, почувствовал сильный скачок во времени рендера.

## Оптимизация работы

Стоит сразу забыть о возможности работать в АЕ в риалтайме. В зависимости от сложности проекта, даже топовые ПК сборки не смогут проигрывать без проблем анимацию. На передний план становится вопрос об оптимизации проектов, и для этого есть много своих трюков и хаков, с которыми более менее комфортно работать даже на слабых ПК.

### [Create Proxies](https://aescripts.com/createproxies/) - Прокси файлы

Многие о прокси файлах знают, но почему-то боятся использовать. Прокси файлы позволяют заменить тяжелую композицию видеофайлом.

### PreCompose

Кроме стандартной цели объединить слои, прекомпозы помогают AE легче обрабатывать тяжелые проекты. Это особенность работы ае, он кэширует все что находится в прекомпозах, то есть условно мы начинаем работать не с разными слоями, а просто картинками.

Это также помогает с ограниченным объемом оперативной памяти. Если в вашей композиции так много слоев, эффектов и тд, что АЕ начинает выбивать ошибки о нехватке оперативной памяти, то прекомпоз слоев сможет решить эту проблему.

### Depth Color

Если мы работаем с проектами где важно количество цветов, например с видео с большой битностью или иллюстрациями с множеством градиентов, мы обычно используем 16 или 32 bps. Но это также радикально сказывается на скорости работы. Если вам в первую очередь важна скорость работы в АЕ и скорость рендера, убедитесь так ли вам нужны эти дополнительные оттенки.

Ставьте 8 бит в процессе работы и выставляйте 16\32 на рендере. Эту настройку можно включить автоматически в панеле Render Settings.

### Очередность слоев

По началу это может показаться не особо интуитивным, но если под вашим видео\прекомпозом\слоем находятся другие слои, то есть они полностью перекрывают все что находится ниже них, то это все-равно сказывается на скорости обработки кадров. Если в данный момент по всему кадру мы видим только один слой, то убирайте под ним другие слои.

### CapsLock

Включение CapsLock делает очень простую и полезную вещь, отключает во время рендера превью картинки. Иногда это может хоть и незначительно, но ускорить процесс рендера в видео или секвенции.

### Fast Previews

В настроках Fast Previews есть две наиболее частоиспользуемые настройки работы вьюпорта: Off(Final Quality) и Adaptive Resolution. Если включена первая, то АЕ будет максимально загружать систему, чтобы просчитывать каждый кадр в лучшем качестве, это сказывается на скорости работы, особенно в очень тяжелых сценах. Режим Adaptive Resolution ускоряет процесс рендера вьюпорта, она сначала выдает картинку худшего качества, а потом постепенно выдает финальный результат. Это позволяет быстрее увидеть результат, но из-за переменчивого качества может мешать работе. Иногда лучше чуть больше подождать, чем смотреть на сильно пикселизированную картинку.

### Resolution\Down Sample Factor Popup

Еще одна настройка вьюпорта, которая варьрирует скорость обработки изображения. По-умолчанию она включена на Auto. Она адаптирует качество изображения от размера вьюпорта. Например, если вы работаете в композиции 800х600 пикселей, и у вас выставлено 100% зума вьюпорта, то есть размер вашей композиции будет один к одному к отображаемой картинке в пикселях, то качество просчета будет full. Half уменьшает качество ровно в два раза, то есть вы будете видеть увеличенную картинку размером 400х300. Можно сказать что просчет картинки вьюпорта ускоряется в два раза. Auto настройка адаптирует качество, если zoom вьюпорта будет меняться.
<!-- Уменьшив изображение на 50%, мы будем видеть картинку в два раза меньшую от исходной, но в  -->

У этих настроек есть несколько особенностей и нюансов работы. Когда мы рендерим видео, чтобы получить итоговое качество, настройка качества должна быть full. Особенность в том, что АЕ каширует кадры когда мы их проигрываем для каждой настройки отдельно. То есть если мы всегда будем работать в full, то часть кадров будут рендериться мгновенно, так как они уже ранее были просчитаны.

### Region of interest

Редко используемая настройка, но иногда может помочь ускорить рендер вьюпорта. С ней мы выбираем область, в которой будет просчет вьюпорта. 

## Что интересного по скриптам

* [Deep Glow](https://aescripts.com/deep-glow/)

В АЕ как-то не задалось с удобным эффектом свечения, вот скрипт который делает как нужно.

* [Elastic Comp Changer](https://aescripts.com/elastic-comp-changer/)

Одна из главных проблем и ограничений в АЕ это работа с продолжительностью композиций, слоев и ключей. Если вам нужно увеличить продолжительность композиции, то нужно лезть в настройки композиции, указывать время, а после растягивать вручную каждый слой чтобы не было пустот. Еще хуже увеличивать продолжительность анимации где-то в течении анимации, тогда нужно вручную двигать все ключи в композиции и внутри других композиций. очень высокий риск допустить ошибку и потом пытаться ее найти. Хорошо есть условно-бесплатный скрипт чтобы справляться с этой болью.

## Фундаментальные ограничения в After Effects

* Сложно работать с большими группами слоев, решается только скриптами и продвинутыми экспрешенами. Модификатор репитер больше похож на игрушку, мало применим в большинстве случаев.
